<mat-card class="container">
  <mat-card-title>Gestion des clients (Personne Morale)</mat-card-title>
  <div class="row">
    <div class="col-10">
      <mat-card>
        <mat-card-title>Option de recherche</mat-card-title>
        <form [formGroup]="searchFormGroup">

          <div class="row">
            <div class="col-6">
              <microfi-select-auto-complete formControlName="unite" libelle={{uniteLibelle}}
                url={{urlUniteBancaireList}} requestType={{requestType}}>
              </microfi-select-auto-complete>
              <div class="row">
                <div class="col-6">
                  <mat-form-field appearance="outline">
                    <mat-label>Code</mat-label>
                    <input formControlName="code" matInput>
                  </mat-form-field>
                </div>
                <div class="col-6">
                  <mat-checkbox class="example-margin">Taxable ?</mat-checkbox>
                </div>
                <div class="col-6">
                  <mat-form-field appearance="outline">
                    <mat-label>Téléphone</mat-label>
                    <input formControlName="tel" matInput>
                  </mat-form-field>
                </div>
                <div class="col-6">
                  <mat-form-field appearance="outline">
                    <mat-label>RCCM</mat-label>
                    <input type="rccm" formControlName="rccm" matInput>
                  </mat-form-field>
                </div>
              </div>
            </div>
            <div class="col-6">
              <microfi-select-auto-complete formControlName="agence" libelle={{agenceLibelle}} url={{urlAgenceList}}
                requestType={{requestType}}>
              </microfi-select-auto-complete>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Nom</mat-label>
                <input formControlName="nom" matInput>
              </mat-form-field>
              <div class="col-12 right-align pt-1">
                <microfi-button [name]="'Rechercher'" (click)="find()" [iconName]="'search'"></microfi-button>

              </div>
            </div>
          </div>

        </form>
      </mat-card>
      <mat-card>
        <mat-card>
          <mat-card-title>Liste des clients, personnes morales</mat-card-title>
          <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" style="width:100%">

            <ng-container matColumnDef="num_membre">
              <th mat-header-cell *matHeaderCellDef> N° Membre</th>
              <td mat-cell *matCellDef="let element"> {{element.idClient}} </td>
            </ng-container>

            <ng-container matColumnDef="categorie_interne">
              <th mat-header-cell *matHeaderCellDef> Categ. Interne</th>
              <td mat-cell *matCellDef="let element"> {{element.categorieInterne.intituleCategorieInterne}} </td>
            </ng-container>

            <ng-container matColumnDef="intitule_membre">
              <th mat-header-cell *matHeaderCellDef> Intitulé membre</th>
              <td mat-cell *matCellDef="let element"> {{element.intituleClient}} </td>
            </ng-container>
            <ng-container matColumnDef="telephone">
              <th mat-header-cell *matHeaderCellDef> Telephone</th>
              <td mat-cell *matCellDef="let element"> {{element.telephone1}} </td>
            </ng-container>
            <ng-container matColumnDef="date_creation">
              <th mat-header-cell *matHeaderCellDef> Date création</th>
              <td mat-cell *matCellDef="let element"> {{element.dateDeCreation}} </td>
            </ng-container>

            <ng-container matColumnDef="rccm_matricule">
              <th mat-header-cell *matHeaderCellDef> RCCM/Matricule</th>
              <td mat-cell *matCellDef="let element">
                {{element.registreDeCommerce + ((element.registreDeCommerce !== null && element.numeroPatente !== null) ? " / " : "") + element.numeroPatente}}
              </td>
            </ng-container>

            <ng-container matColumnDef="num_contribuable">
              <th mat-header-cell *matHeaderCellDef> N° Contribuable</th>
              <td mat-cell *matCellDef="let element"> {{element.numeroContribuable}} </td>
            </ng-container>

            <ng-container matColumnDef="nature">
              <th mat-header-cell *matHeaderCellDef> Nature</th>
              <td mat-cell *matCellDef="let element"> {{element.nature}} </td>
            </ng-container>

            <ng-container matColumnDef="parts_sociales">
              <th mat-header-cell *matHeaderCellDef> Parts sociales</th>
              <td mat-cell *matCellDef="let element"> {{element.montantPart}} </td>
            </ng-container>

            <ng-container matColumnDef="fonds_solidarite">
              <th mat-header-cell *matHeaderCellDef> Fonds solidarité</th>
              <td mat-cell *matCellDef="let element"> {{element.montantFond}} </td>
            </ng-container>

            <ng-container matColumnDef="date_adhesion">
              <th mat-header-cell *matHeaderCellDef> Date adhésion</th>
              <td mat-cell *matCellDef="let element"> {{element.dateAdhesion}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr (click)="selectedItem(row)" mat-row *matRowDef="let row; columns: displayedColumns;"
              [class.selected_table]="row.idClient === selectedItemOnTables.idClient"></tr>
          </table>
          <mat-paginator [length]="totalItems" [pageSize]="itemsPerPage" [pageSizeOptions]="[5, 10, 25, 100]"
          (page)="onPaginate($event)">
        </mat-paginator>
        </mat-card>

      </mat-card>
    </div>
    <div class="col-2">
      <div class="d-flex menu-btn-right">

        <microfi-button [name]="'Nouveau'" [routerLink]="'/moral-view'"></microfi-button>
        <microfi-button [name]="'Consulter'" (click)="redirectToDetails()"></microfi-button>
        <microfi-button [name]="'Modifier'" (click)="redirectToUpdate()"></microfi-button>
        <microfi-button [name]="'Supprimer'" (click)="deleteUser()"></microfi-button>
        <microfi-button [name]="'Imprimer'"></microfi-button>
      </div>
    </div>
  </div>
</mat-card>
